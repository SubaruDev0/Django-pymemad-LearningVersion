{% extends "email/base_email.html" %}
{% load i18n %}

{% block email_title %}{% trans "Recuperación de contraseña - PymeMad" %}{% endblock %}

{% block header_icon %}
    <div class="header-icon">
        <div class="header-icon-inner">
            <span>🔐</span>
        </div>
    </div>
{% endblock %}

{% block header_title %}{% trans "Recuperación de Contraseña" %}{% endblock %}
{% block header_subtitle %}{% trans "Solicitud de restablecimiento recibida" %}{% endblock %}

{% block content %}
    <h2 class="greeting">{% trans "Hola" %} {{ user.get_full_name|default:user.username }},</h2>

    <p class="intro-text">
        {% trans "Hemos recibido una solicitud para restablecer la contraseña de tu cuenta en PymeMad. Si realizaste esta solicitud, haz clic en el botón de abajo para crear una nueva contraseña." %}
    </p>

    <!-- Security alert -->
    <div class="alert-card warning">
        <div>
            <span class="alert-icon">⏰</span>
            <h3 class="alert-title">{% trans "Enlace válido por 24 horas" %}</h3>
        </div>
        <p class="alert-text">
            {% trans "Por razones de seguridad, este enlace expirará en 24 horas. Si necesitas más tiempo, puedes solicitar un nuevo enlace." %}
        </p>
    </div>

    <!-- CTA Button -->
    <div class="cta-container">
        <a href="{{ protocol }}://{{ domain }}{% url 'accounts:password_reset_confirm' uidb64=uid token=token %}" class="cta-button">
            {% trans "Restablecer Mi Contraseña" %}
        </a>
    </div>

    <!-- Alternative link -->
    <div class="alternative-section">
        <h4 class="alternative-title">{% trans "¿No puedes hacer clic en el botón?" %}</h4>
        <p style="color: #6b7280; font-size: 13px; margin: 0 0 8px 0;">
            {% trans "Copia y pega el siguiente enlace en tu navegador:" %}
        </p>
        <span class="link-text">{{ protocol }}://{{ domain }}{% url 'accounts:password_reset_confirm' uidb64=uid token=token %}</span>
    </div>

    <!-- Security tips with table layout -->
    <div class="tips-section">
        <h3 class="tips-title">
            <span style="display: inline-block; width: 30px; height: 30px; background: #2c5530; color: white; border-radius: 50%; line-height: 30px; text-align: center; margin-right: 8px; vertical-align: middle;">🛡️</span>
            {% trans "Consejos de Seguridad" %}
        </h3>

        <div class="tip-item">
            <table class="tip-table">
                <tr>
                    <td class="tip-icon-cell">
                        <div class="tip-icon">
                            <div class="tip-icon-inner">✓</div>
                        </div>
                    </td>
                    <td class="tip-text">{% trans "Usa una contraseña única de al menos 8 caracteres" %}</td>
                </tr>
            </table>
        </div>

        <div class="tip-item">
            <table class="tip-table">
                <tr>
                    <td class="tip-icon-cell">
                        <div class="tip-icon">
                            <div class="tip-icon-inner">✓</div>
                        </div>
                    </td>
                    <td class="tip-text">{% trans "Combina letras mayúsculas, minúsculas, números y símbolos" %}</td>
                </tr>
            </table>
        </div>

        <div class="tip-item">
            <table class="tip-table">
                <tr>
                    <td class="tip-icon-cell">
                        <div class="tip-icon">
                            <div class="tip-icon-inner">✓</div>
                        </div>
                    </td>
                    <td class="tip-text">{% trans "No uses información personal fácil de adivinar" %}</td>
                </tr>
            </table>
        </div>

        <div class="tip-item">
            <table class="tip-table">
                <tr>
                    <td class="tip-icon-cell">
                        <div class="tip-icon">
                            <div class="tip-icon-inner">✓</div>
                        </div>
                    </td>
                    <td class="tip-text">{% trans "Nunca compartas tu contraseña con nadie" %}</td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Warning section -->
    <div class="alert-card danger">
        <div style="text-align: center;">
            <span class="alert-icon" style="text-align: center;">⚠</span>
            <h3 class="alert-title">{% trans "¿No solicitaste este cambio?" %}</h3>
        </div>
        <p class="alert-text">
            {% trans "Si no solicitaste restablecer tu contraseña, puedes ignorar este correo de manera segura. Tu contraseña actual permanecerá sin cambios y nadie más podrá acceder a tu cuenta." %}
        </p>
    </div>

    <!-- Contact info with table layout -->
    <div class="contact-section">
        <h3 class="contact-title">{% trans "¿Necesitas ayuda? Contáctanos" %}</h3>
        <div class="contact-grid">
            <table class="contact-table">
                <tr>
                    <td class="contact-cell">
                        <p class="contact-name">nombre1</p>
                        <p class="contact-detail">
                            <span class="contact-icon">📞</span>
                            <a href="tel:+56999182981">+56 9 12345678</a>
                        </p>
                        <p class="contact-detail">
                            <span class="contact-icon">✉</span>
                            <a href="mailto:nombre1@pymemad.cl">nombre1@pymemad.cl</a>
                        </p>
                    </td>
                    <td class="contact-spacer"></td>
                    <td class="contact-cell">
                        <p class="contact-name">nombre2</p>
                        <p class="contact-detail">
                            <span class="contact-icon">📞</span>
                            <a href="tel:+56984092585">+56 9 9876543</a>
                        </p>
                        <p class="contact-detail">
                            <span class="contact-icon">✉</span>
                            <a href="mailto:nmbre2@pymemad.cl">nombre2@pymemad.cl</a>
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <p style="text-align: center; color: #6b7280; font-size: 13px; margin: 16px 0 0 0;">
            {% trans "Atención todos los días, incluyendo fiestas y domingos" %}
        </p>
    </div>
{% endblock %}

{% block footer_disclaimer %}
    <p class="footer-disclaimer">
        {% trans "Este es un mensaje automático de seguridad. Por favor no respondas a este correo." %}<br>
        {% trans "Si no solicitaste este cambio, puedes ignorar este mensaje de manera segura." %}
    </p>
{% endblock %}